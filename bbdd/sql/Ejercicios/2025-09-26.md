## Ejercicio 1 bis

=============================================

Crear la tabla usuarios:  

Columnas:
	id: Entero, clave primaria y autoincrementable.
	nombre: Cadena de caracteres (VARCHAR(50)), no nula.
	email: Cadena de caracteres (VARCHAR(100)), no nula y única.
	fecha_registro: Fecha, con valor por defecto (Fecha actual)

```sql
CREATE TABLE tb_usuarios (
    id NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    email VARCHAR(50) NOT NULL UNIQUE,
    fecha_registro DATE DEFAULT SYSDATE
);
```
  
  Modificar la tabla para añadir una columna: Agregar la columna telefono de tipo VARCHAR(15) que permita valores nulos.

  ```sql
  ALTER TABLE tb_usuarios ADD telefono VARCHAR(15);
  ```

Modificar el tipo de datos de la columna nombre: Cambiar la definición de nombre a VARCHAR(100).

```sql
ALTER TABLE tb_usuarios MODIFY nombre VARCHAR(100);
```


## Ejercicio 2

Ejercicio 2

=============================================

1. Creación de la tabla productos

Requisitos:

	- Campos y restricciones:	
	- id: Entero, clave primaria y autoincrementable.	
	- nombre: Cadena de caracteres (VARCHAR(100)), no nulo.	
	- descripcion: Texto (TEXT), puede ser nulo.	
	- precio: Número decimal (DECIMAL(8,2)), no nulo y debe ser mayor o igual a 0.	
	- stock: Entero, no nulo y con valor por defecto 0.	
	- fecha_registro: Fecha y hora (DATETIME), con valor por defecto la fecha y hora actual.
	- descuento: Número entero, que representa el porcentaje de descuento (entre 0 y 100). (Se usará una restricción CHECK para validar este rango.)
	- estado: Cadena de caracteres (ENUM) que solo puede tener los valores 'activo' o 'inactivo', con valor por defecto 'activo'.

  
```sql
CREATE TABLE tb_productos (
    id NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    descripcion CLOB,
    precio NUMBER(8,2) DEFAULT 0 NOT NULL CHECK (precio >= 0),
    stock NUMBER(10,0) DEFAULT 0 NOT NULL,
    fecha_registro DATE DEFAULT SYSDATE,
    descuento NUMBER(3,0) CHECK (descuento >= 0 AND descuento <= 100),
    estado VARCHAR(8) DEFAULT 'activo' CHECK (estado IN ('activo', 'inactivo'))
);
```

> Cree un **CLOB** porque no me permitía crear un TEXT en description e hice ese check ene estado porque no me permite crear ENUM

2. Modificación de la tabla productos
	- a) Añadir nuevas columnas	
		- Agregar la columna categoria:		
			- Tipo VARCHAR(50), no nulo.		
		- Agregar la columna proveedor:
			- Tipo VARCHAR(100), que permita nulos.	
			
```sql
ALTER TABLE tb_productos
ADD(
    categogoria VARCHAR(50) NOT NULL,
    proveedor VARCHAR(100)    
);
```

	- b) Modificar el tipo de datos de la columna descripcion
			- Cambiar el tipo de datos de descripcion de TEXT a VARCHAR(500) para limitar la longitud a 500 caracteres.

Intentar

```sql
ALTER TABLE tb_productos MODIFY descripcion VARCHAR(500);
```

dio el siguiente error

```bash
Error starting at line : 1 in command -
ALTER TABLE tb_productos MODIFY descripcion VARCHAR(500)
Error report -
ORA-22859: invalid modification of columns
```

> You defined `descripcion` as a **CLOB** (large object) when you created the table.  
> Now you’re trying to `MODIFY` it into a `VARCHAR(500)`, but **Oracle does not allow converting a LOB column (CLOB, BLOB, etc.) to a scalar type like VARCHAR**

asi que elimine la columna y la volvi a crear (si tuviera contenido la habria tenido que copiar primero pensar en como conservar el ID):

```sql
ALTER TABLE tb_productos
DROP COLUMN descripcion;
```

```sql
ALTER TABLE tb_productos
ADD descripcion VARCHAR(500);
```

3. Eliminación de la tabla productos
	Una vez realizados los ejercicios y pruebas, se eliminará la tabla.
```sql
DROP TABLE tb_productos
```