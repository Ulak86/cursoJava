# Java - Sobrescritura de métodos (override)

En Java, para sobrescribir un método correctamente:

- El método sobrescrito debe tener la misma firma (nombre y parámetros) que el método original.
- Solo se puede cambiar el modificador de acceso, y solo si se hace más permisivo.
- No se puede cambiar el tipo de retorno (salvo en casos covariantes).
- Es buena práctica usar la anotación `@Override`.

---

## Reglas de sobrescritura

| Elemento                    | ¿Se puede cambiar al sobrescribir? |
| --------------------------- | ---------------------------------- |
| Nombre del método           | No                                 |
| Número y tipo de parámetros | No                                 |
| Tipo de retorno             | Solo si es covariante              |
| Modificador de acceso       | Sí, si es más permisivo            |
| Excepciones lanzadas        | Limitado                           |

> [!note] **Covariante**: el método sobrescrito puede devolver un subtipo del tipo de retorno original.

```java
// Clases propias
class Animal {}
class Perro extends Animal {}       // Perro es subtipo de Animal
class Gato extends Animal {}        // Gato es subtipo de Animal

// Clases estándar de Java
Number → Integer
Number → Double

Collection → List → ArrayList
Collection → Set → HashSet

CharSequence → String
Object → String
```

---

## Ejemplo básico

```java
class Animal {
    protected void hacerSonido() {
        System.out.println("Sonido genérico");
    }
}

class Perro extends Animal {
    @Override
    public void hacerSonido() {
        System.out.println("Guau!");
    }
}
```

Explicación:

- El método `hacerSonido` es sobrescrito en `Perro`.
    
- Firma igual: mismo nombre y parámetros.
    
- Se cambia el modificador de acceso de `protected` a `public` (más permisivo).

```java
class Perro extends Animal {
    // Esto no es sobrescritura, es sobrecarga (overload)
    public void hacerSonido(String tipo) {
        System.out.println(tipo);
    }
}

```

En este caso, se agrega un parámetro, por lo tanto se considera una sobrecarga, no una sobrescritura.

---

## Recomendación

Usa siempre `@Override` para asegurarte de que realmente estás sobrescribiendo un método. El compilador te avisará si hay algún error en la firma.

---

# `protected`

- El miembro (variable o método) declarado como `protected` es accesible desde:
    
    - La **misma clase**.
        
    - Las **subclases** (clases que heredan de esa clase), incluso si están en **paquetes diferentes**.
        
    - Otras clases que estén en **el mismo paquete** (aunque no sean subclases).